<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/share.css">
    <link rel="stylesheet" href="css/register.css">
    <script src="jquery.js"></script>

    <title>注册</title>
</head>
<body>
<div class="warper">
    <div class="warp">
        <div class="layout">
            <div class="logo"><img src="images/milogo.png" alt=""></div>
            <div class="biaoti">
                <p>注册小米帐号</p>
            </div>
            <div class="reg">
                <div class="top">
                    <p class="top-p">账号</p>
                    <div class="top1">
                        <input type="text" placeholder="请输入手机号码" id="username">
                    </div>
                <p class="bottom-p">密码</p>
                    <div class="top2">
                        <input type="password" placeholder="请输入密码" id="password">
                    </div>
                    <p class="bottom-p">确认密码</p>
                    <div class="top2">
                        <input type="password" placeholder="请再次输入密码" id="repassword">
                    </div>
                <span id="err"></span>
                    <div class="center" >
                        <div class="zhuce" id="btn">立即注册</div>
                    </div>
            </div>
        </div>
        <div class="bianhao">
            <p><input type="checkbox">注册帐号即表示您同意并愿意遵守小米 用户协议和 隐私政策</p>
        </div>
    </div>
</div> 
<div class="footer">
        <div class="footer-main">
            <ul>
                <li class="ulli"><a href="">简体</a></li>
                <li><a href="">繁体</a></li>
                <li><a href="">English</a></li>
                <li><a href="">常见问题</a></li>
                <li><a href="">隐私政策</a></li>
            </ul>
            
        </div>
        <div class="intro">小米公司版权所有-京ICP备10046444京公网安备10123579023-京ICP证110507号</div>
    </div>
</body>
<script>
    $("#btn").click(function () {
        var regu = /^1(3|4|5|7|8)\d{9}$/;
        var regp=/^[a-zA-Z0-9]{4,10}$/;
        var err = $("#err"); 
        var username = $('#username').val();
        var password = $('#password').val();
        var repassword = $('#repassword').val();
        if (username == '' || password == '') {
            err.css('color','red').html('用户名或密码不为空！');
            return;
        }else if(!(regu.test(username))){
            err.css('color','red').html('手机号码有误，请重填！');   
            return; 
        }else if(!(regp.test(password))){
            err.css('color','red').html('密码不能含有非法字符，长度在4-10之间！');   
            return; 
        }else if (!(password === repassword)) {
            err.css('color','red').html('两次密码不一致！');   
            return;
        }else{
            err.html('');
        } 
        $.ajax({
            'type':'post',
            'url':'php/register.php',
            'data':{'username':username,'password':password},
            'dataType':'json',
            'success':function(res){
                console.log(res);
                if (res.code == 200) {
                    err.css('color','green').html(res.message);
                } else {
                    err.css('color','red').html(res.message);
                }
            }
        })

     })
</script>
</html>